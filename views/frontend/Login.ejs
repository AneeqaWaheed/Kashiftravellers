<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
     <!-- Icon link -->
     <script src="https://kit.fontawesome.com/b99e675b6e.js"></script>

     <!-- CSS Links -->
     <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/css/bootstrap.min.css"
         integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
     <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.1/dist/jquery.slim.min.js"></script>
     <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
     <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.bundle.min.js"></script>
     <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.3/jquery.min.js"></script>
     <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
 
     <!--Style sheet css-->
     <link rel="stylesheet" href="/css/frontend/Style.css">

    <title>Login</title>
</head>
<body>
    <div id="mydivmodal" class="modal">
        <% if (message) { %>
            <p style="color : red;">
                <%=message %>
            </p>

            <% } %>
        <form class="mymodal-content animate" action="/Log-me-in" method="post" name="formname">
            <h3 class="Log_heading"><center>LOGIN FORM<center></h3>
            <div class="container">
                <label for="uname"></label>
                <input class="inputs" type="email" name="email" id="email" placeholder="Enter Email" required="required">
                <label for="pass"></label>
                <input class="inputs" type="password" name="password" id="password" placeholder="Enter Password" required="required">
                <button class="Login_button" type="submit" onclick="login(loginform)">Login</button>

                <label for="remember">
                    <input type="checkbox" checked="checked" > 
                    Remember Me
                </label>
            </div>
            <div class="container" style="background-color: #f2f2f2;">
                <span  class="lgn">Don't Have An Account?<a href="/Reg">Sign Up</a></span>
                <span class="lgn">Forgot <a href="#">password?</a></span>
            </div>
        </form>
        <script>
            function login(loginform) {
  if (loginform.email.value && loginform.password.value) {
    var name = document.getElementById("email").value;
    var xhr = new XMLHttpRequest();
    xhr.open("POST", "/login", true);
    xhr.setRequestHeader("Content-Type", "application/json");
    xhr.onreadystatechange = function () {
      if (xhr.readyState === 4 && xhr.status === 200) {
        // Redirect to the homepage or any other authenticated page
        window.location.href = "/index";
      }
    };
    xhr.send(JSON.stringify({ name: name }));
  } else {
    alert('Please enter your email and password');
  }
}

        </script>
    </div>
</body>
</html>